<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>小飞机</title>
  </head>
  <body>
    <button id="btn">下载</button>
    <br/>
    <a target="_blank" href="https://www.youtube.com/channel/UC2QpdWej8WRwJZiyIUr0W6A/videos">建民</a>
  </body>
  <script type="text/javascript">
    let strs = `{
    	"configs" : [
    		{
    			"remarks" : "",
    			"id" : "B304740F655093B617140D5E6EB0DAF0",
    			"server" : "139.162.91.142",
    			"server_port" : 8099,
    			"server_udp_port" : 0,
    			"password" : "eIW0Dnk69454e6nSwuspv9DmS201tQ0D",
    			"method" : "aes-256-cfb",
    			"protocol" : "origin",
    			"protocolparam" : "",
    			"obfs" : "plain",
    			"obfsparam" : "",
    			"remarks_base64" : "",
    			"group" : "",
    			"enable" : true,
    			"udp_over_tcp" : false
    		},
    		{
    			"remarks" : "",
    			"id" : "B304740F655093B617140D5E6EB0DAF1",
    			"server" : "172.104.116.232",
    			"server_port" : 8099,
    			"server_udp_port" : 0,
    			"password" : "eIW0Dnk69454e6nSwuspv9DmS201tQ0D",
    			"method" : "aes-256-cfb",
    			"protocol" : "origin",
    			"protocolparam" : "",
    			"obfs" : "plain",
    			"obfsparam" : "",
    			"remarks_base64" : "",
    			"group" : "",
    			"enable" : true,
    			"udp_over_tcp" : false
    		},
    		{
    			"remarks" : "",
    			"id" : "B304740F655093B617140D5E6EB0DAF2",
    			"server" : "66.228.49.236",
    			"server_port" : 21381,
    			"server_udp_port" : 0,
    			"password" : "H2SvzxWp9bvB",
    			"method" : "aes-256-cfb",
    			"protocol" : "origin",
    			"protocolparam" : "",
    			"obfs" : "plain",
    			"obfsparam" : "",
    			"remarks_base64" : "",
    			"group" : "",
    			"enable" : true,
    			"udp_over_tcp" : false
    		}
    	],
    	"index" : 0,
    	"random" : true,
    	"sysProxyMode" : 3,
    	"shareOverLan" : false,
    	"localPort" : 1080,
    	"localAuthPassword" : "F7o73vd3olK3GejdWi81",
    	"dnsServer" : "",
    	"reconnectTimes" : 2,
    	"balanceAlgorithm" : "LowException",
    	"randomInGroup" : false,
    	"TTL" : 0,
    	"connectTimeout" : 5,
    	"proxyRuleMode" : 2,
    	"proxyEnable" : false,
    	"pacDirectGoProxy" : false,
    	"proxyType" : 0,
    	"proxyHost" : null,
    	"proxyPort" : 0,
    	"proxyAuthUser" : null,
    	"proxyAuthPass" : null,
    	"proxyUserAgent" : null,
    	"authUser" : null,
    	"authPass" : null,
    	"autoBan" : false,
    	"sameHostForSameTarget" : false,
    	"keepVisitTime" : 180,
    	"isHideTips" : false,
    	"nodeFeedAutoUpdate" : true,
    	"serverSubscribes" : [

    	],
    	"token" : {

    	},
    	"portMap" : {

    	}
    }
`
    // var eleTextarea = document.querySelector('textarea');
    var eleButton = document.getElementById("btn")

    // 下载文件方法
    var funDownload = function (content, filename) {
      var eleLink = document.createElement('a');
      eleLink.download = filename;
      eleLink.style.display = 'none';
      // 字符内容转变成blob地址
      var blob = new Blob([content]);
      eleLink.href = URL.createObjectURL(blob);
      // 触发点击
      document.body.appendChild(eleLink);
      eleLink.click();
      // 然后移除
      document.body.removeChild(eleLink);
    };

    if ('download' in document.createElement('a')) {
      // 作为test.html文件下载
      eleButton.addEventListener('click', function () {
          // funDownload(eleTextarea.value, 'test.html');
          funDownload(strs, 'gui-config.json');

      });
    } else {
      eleButton.onclick = function () {
          alert('浏览器不支持');
      };
    }
  </script>
</html>
